<h2>Dashboard</h2>
<p>Accessing protected route...</p>
<pre id="response"></pre>

<script>
  const token = localStorage.getItem('token');
  const role = localStorage.getItem('role'); // store on login

  if (role === 'admin') {
    document.body.innerHTML += '<h2>Admin Tools</h2>';
  } else {
  document.body.innerHTML += '<h2>User Dashboard</h2>';
  }

  fetch('http://localhost:3000/api/protected', {
    headers: {
      'Authorization': `Bearer ${token}`,
    },
  })
    .then(res => res.json())
    .then(data => {
      document.getElementById('response').textContent = JSON.stringify(data, null, 2);
    })
    .catch(err => {
      document.getElementById('response').textContent = 'Access failed';
      console.error("Protected route error:", err);
    });
</script>
